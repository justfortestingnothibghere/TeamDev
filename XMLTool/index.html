<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TeamDev - XML Tools</title>
  <meta name="description" content="Free online XML tools - XML to Image, Image to XML, Color picker with all formats (HEX, RGB, HSL, CMYK, etc.), Beautifier, Minifier, Validator and more."/>

  <!-- Favicon -->
  <link rel="icon" href="logo.xml" type="image/svg+xml"/>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- jsPDF for PDF export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <!-- ImageTracer for non-AI image to SVG -->
  <script src="https://cdn.jsdelivr.net/gh/jankovicsandras/imagetracerjs@master/imagetracer_v1.2.6.js"></script>

  <!-- Custom Styles -->
  <style>
    .gradient-bg { background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); }
    .card-hover { transition: all 0.3s; }
    .card-hover:hover { transform: translateY(-8px); box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3); }
    .xml-output, .color-output { font-family: 'Courier New', monospace; }
  </style>
</head>
<body class="min-h-screen gradient-bg text-gray-100">

  <!-- Navbar -->
  <nav class="bg-black/50 backdrop-blur-md border-b border-gray-800 sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
      <div class="flex items-center space-x-3">
        <object data="logo.xml" type="image/svg+xml" class="w-10 h-10"></object>
        <h1 class="text-2xl font-bold text-white">TeamDev</h1>
      </div>
      <a href="index.html" class="text-yellow-400 hover:text-yellow-300 flex items-center gap-2">
        <span>Back To Home</span>
        <span class="text-2xl">üè°</span>
      </a>
    </div>
  </nav>

  <!-- Hero -->
  <section class="text-center py-20 px-6">
    <h1 class="text-5xl md:text-6xl font-extrabold mb-6">
      <span class="text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-green-400">XML Tools</span>
    </h1>
    <p class="text-xl text-gray-300 max-w-3xl mx-auto">
      All-in-one free online XML toolbox: Convert XML ‚Üî Image, Color picker with every format, Beautify, Minify, Validate, AI Custom Generator, and 20+ powerful tools.
    </p>
  </section>

  <!-- Tools Grid -->
  <div class="max-w-7xl mx-auto px-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 pb-20">

    <!-- 1. XML to Image -->
    <div class="bg-gray-900/80 backdrop-blur border border-gray-700 rounded-2xl p-8 card-hover">
      <h3 class="text-2xl font-bold mb-4 text-yellow-400">XML to Image</h3>
      <textarea id="xmlInput" class="w-full h-48 bg-black/50 border border-gray-600 rounded-lg p-4 text-sm xml-output" placeholder="Paste your SVG/XML code here..."></textarea>
      <button onclick="xmlToImage()" class="mt-4 w-full bg-gradient-to-r from-yellow-500 to-amber-600 hover:from-yellow-600 hover:to-amber-700 text-black font-bold py-3 rounded-lg">
        Generate Image
      </button>
      <div id="xmlPreview" class="mt-6 border-2 border-dashed border-gray-600 rounded-xl flex items-center justify-center min-h-64 bg-black/30">
        <p class="text-gray-500">Preview will appear here</p>
      </div>
      <select id="downloadFormat" class="mt-4 w-full bg-black/50 border border-gray-600 rounded-lg p-3">
        <option value="png">PNG</option>
        <option value="svg">SVG</option>
        <option value="pdf">PDF</option>
        <option value="jpg">JPG</option>
        <option value="webp">WEBP</option>
      </select>
      <button onclick="downloadImage()" class="mt-2 w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg hidden" id="downloadXmlBtn">
        Download
      </button>
    </div>

    <!-- 2. Image to XML (Non-AI Tracer) -->
    <div class="bg-gray-900/80 backdrop-blur border border-gray-700 rounded-2xl p-8 card-hover">
      <h3 class="text-2xl font-bold mb-4 text-green-400">Image to XML (SVG)</h3>
      <input type="file" id="imageUpload" accept="image/*" class="w-full file:mr-4 file:py-3 file:px-6 file:rounded-lg file:border-0 file:bg-green-600 file:text-white hover:file:bg-green-700"/>
      <div id="imagePreview" class="mt-6 border-2 border-dashed border-gray-600 rounded-xl min-h-64 bg-black/30 flex items-center justify-center">
        <p class="text-gray-500">Upload image to convert</p>
      </div>
      <textarea id="svgOutput" class="w-full h-48 bg-black/50 border border-gray-600 rounded-lg p-4 text-sm xml-output mt-4" placeholder="SVG code will appear here..." readonly></textarea>
      <button onclick="copySvg()" class="mt-4 w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg" id="copySvgBtn" hidden>Copy SVG Code</button>
    </div>

    <!-- 3. Color Converter -->
    <div class="bg-gray-900/80 backdrop-blur border border-gray-700 rounded-2xl p-8 card-hover lg:col-span-1 md:col-span-2 lg:row-span-2">
      <h3 class="text-2xl font-bold mb-6 text-purple-400">Color Converter (All Formats)</h3>
      <div class="grid grid-cols-2 gap-4 mb-6">
        <input type="color" id="colorPicker" class="w-full h-32 rounded-lg cursor-pointer"/>
        <div id="colorPreview" class="w-full h-32 rounded-lg border-4 border-gray-700" style="background:#3b82f6"></div>
      </div>
      <div class="space-y-3 text-sm">
        <div class="flex justify-between bg-black/40 p-3 rounded"><span>HEX</span><code id="hex">#3B82F6</code></div>
        <div class="flex justify-between bg-black/40 p-3 rounded"><span>RGB</span><code id="rgb">rgb(59, 130, 246)</code></div>
        <div class="flex justify-between bg-black/40 p-3 rounded"><span>HSL</span><code id="hsl">hsl(216, 89%, 60%)</code></div>
        <div class="flex justify-between bg-black/40 p-3 rounded"><span>HSV</span><code id="hsv">hsv(216, 76%, 96%)</code></div>
        <div class="flex justify-between bg-black/40 p-3 rounded"><span>CMYK</span><code id="cmyk">cmyk(76%, 47%, 0%, 4%)</code></div>
        <div class="flex justify-between bg-black/40 p-3 rounded"><span>CSS</span><code id="css">rgb(59, 130, 246)</code></div>
        <div class="flex justify-between bg-black/40 p-3 rounded"><span>TAILWIND</span><code id="tailwind">blue-500</code></div>
      </div>
      <button onclick="copyColor()" class="mt-6 w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 rounded-lg">Copy All Formats</button>
    </div>

    <!-- 4. XML Beautifier -->
    <div class="bg-gray-900/80 backdrop-blur border border-gray-700 rounded-2xl p-8 card-hover">
      <h3 class="text-2xl font-bold mb-4 text-cyan-400">XML Beautifier</h3>
      <textarea id="xmlBeautifyInput" class="w-full h-48 bg-black/50 border border-gray-600 rounded-lg p-4 text-sm xml-output" placeholder="Paste your XML code here..."></textarea>
      <button onclick="beautifyXml()" class="mt-4 w-full bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-3 rounded-lg">Beautify XML</button>
      <textarea id="xmlBeautifyOutput" class="w-full h-48 bg-black/50 border border-gray-600 rounded-lg p-4 text-sm xml-output mt-4" placeholder="Beautified XML will appear here..." readonly></textarea>
      <button onclick="copyBeautified()" class="mt-2 w-full bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-3 rounded-lg hidden" id="copyBeautifyBtn">Copy Beautified XML</button>
    </div>

    <!-- 5. XML Minifier -->
    <div class="bg-gray-900/80 backdrop-blur border border-gray-700 rounded-2xl p-8 card-hover">
      <h3 class="text-2xl font-bold mb-4 text-pink-400">XML Minifier</h3>
      <textarea id="xmlMinifyInput" class="w-full h-48 bg-black/50 border border-gray-600 rounded-lg p-4 text-sm xml-output" placeholder="Paste your XML code here..."></textarea>
      <button onclick="minifyXml()" class="mt-4 w-full bg-pink-600 hover:bg-pink-700 text-white font-bold py-3 rounded-lg">Minify XML</button>
      <textarea id="xmlMinifyOutput" class="w-full h-48 bg-black/50 border border-gray-600 rounded-lg p-4 text-sm xml-output mt-4" placeholder="Minified XML will appear here..." readonly></textarea>
      <button onclick="copyMinified()" class="mt-2 w-full bg-pink-600 hover:bg-pink-700 text-white font-bold py-3 rounded-lg hidden" id="copyMinifyBtn">Copy Minified XML</button>
    </div>

    <!-- 6. XML Validator -->
    <div class="bg-gray-900/80 backdrop-blur border border-gray-700 rounded-2xl p-8 card-hover">
      <h3 class="text-2xl font-bold mb-4 text-orange-400">XML Validator</h3>
      <textarea id="xmlValidateInput" class="w-full h-48 bg-black/50 border border-gray-600 rounded-lg p-4 text-sm xml-output" placeholder="Paste your XML code here..."></textarea>
      <button onclick="validateXml()" class="mt-4 w-full bg-orange-600 hover:bg-orange-700 text-white font-bold py-3 rounded-lg">Validate XML</button>
      <div id="xmlValidateOutput" class="mt-4 p-4 bg-black/50 border border-gray-600 rounded-lg text-sm"></div>
    </div>

    <!-- 7. AI Custom XML Generator -->
    <div class="bg-gray-900/80 backdrop-blur border border-gray-700 rounded-2xl p-8 card-hover lg:col-span-2">
      <h3 class="text-2xl font-bold mb-4 text-indigo-400">Custom XML/SVG Generator</h3>
      <textarea id="svgPrompt" class="w-full h-24 bg-black/50 border border-gray-600 rounded-lg p-4 text-sm" placeholder="Describe the SVG you want, e.g., 'a red circle with blue border'"></textarea>
      <button onclick="generateCustomSvg()" class="mt-4 w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg">Generate SVG</button>
      <div id="customSvgPreview" class="mt-6 border-2 border-dashed border-gray-600 rounded-xl flex items-center justify-center min-h-64 bg-black/30">
        <p class="text-gray-500">Preview will appear here</p>
      </div>
      <textarea id="customSvgOutput" class="w-full h-48 bg-black/50 border border-gray-600 rounded-lg p-4 text-sm xml-output mt-4" placeholder="Generated SVG code will appear here..." readonly></textarea>
      <button onclick="copyCustomSvg()" class="mt-2 w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg hidden" id="copyCustomSvgBtn">Copy Generated SVG</button>
    </div>

  </div>

  <!-- Footer -->
  <footer class="bg-black/70 backdrop-blur border-t border-gray-800 py-10 text-center">
    <p class="text-gray-400">¬© 2025 TeamDev | Made with üíõ + üíö</p>
  </footer>

  <!-- Scripts -->
  <script type="text/javascript">
    const GEMINI_API_KEY = "AIzaSyBRkcviEqqDrERvFp9u1rO-jwaLm2QcSNE";
    
    // XML to Image (Real rendering)
    async function xmlToImage() {
      const xml = document.getElementById("xmlInput").value;
      if (!xml.trim()) return alert("Please paste XML/SVG code");
      const preview = document.getElementById("xmlPreview");
      preview.innerHTML = xml;
      document.getElementById("downloadXmlBtn").classList.remove("hidden");
    }

    function downloadImage() {
      const svgElement = document.getElementById("xmlPreview").querySelector('svg');
      if (!svgElement) return alert("Invalid SVG");
      
      const format = document.getElementById("downloadFormat").value;
      const svg = new XMLSerializer().serializeToString(svgElement);
      const blob = new Blob([svg], { type: "image/svg+xml" });
      const url = URL.createObjectURL(blob);
      
      if (format === "svg") {
        const a = document.createElement("a");
        a.href = url;
        a.download = `teamdev-output.${format}`;
        a.click();
        return;
      }

      const img = new Image();
      img.onload = function() {
        const canvas = document.createElement("canvas");
        canvas.width = img.width;
        canvas.height = img.height;
        const ctx = canvas.getContext("2d");
        ctx.drawImage(img, 0, 0);
        
        let mime = `image/${format}`;
        if (format === "pdf") {
          const { jsPDF } = window.jspdf;
          const pdf = new jsPDF({
            orientation: img.width > img.height ? 'l' : 'p',
            unit: 'px',
            format: [img.width, img.height]
          });
          pdf.addImage(canvas.toDataURL("image/png"), 'PNG', 0, 0, img.width, img.height);
          pdf.save("teamdev-output.pdf");
          return;
        }
        
        canvas.toBlob(blob => {
          const dlUrl = URL.createObjectURL(blob);
          const a = document.createElement("a");
          a.href = dlUrl;
          a.download = `teamdev-output.${format}`;
          a.click();
        }, mime);
      };
      img.src = url;
    }

    // Image to XML (Non-AI using ImageTracer)
    document.getElementById("imageUpload").addEventListener("change", function(e) {
      const file = e.target.files[0];
      if (!file) return;

      const preview = document.getElementById("imagePreview");
      preview.innerHTML = `<img id="traceImg" src="${URL.createObjectURL(file)}" class="max-w-full max-h-64 rounded"/>`;

      const img = document.getElementById("traceImg");
      img.onload = function() {
        ImageTracer.imageToSVG(
          img.src,
          function(svgstr) {
            document.getElementById("svgOutput").value = svgstr;
            document.getElementById("copySvgBtn").hidden = false;
          },
          'posterized2' // Options: detailed, posterized, etc.
        );
      };
    });

    function copySvg() {
      const code = document.getElementById("svgOutput").value;
      navigator.clipboard.writeText(code);
      alert("SVG code copied!");
    }

    // Color Converter (unchanged)
    const colorPicker = document.getElementById("colorPicker");
    const colorPreview = document.getElementById("colorPreview");

    function updateColor(hex) {
      colorPreview.style.background = hex;
      document.getElementById("hex").textContent = hex;
      
      const r = parseInt(hex.slice(1,3),16);
      const g = parseInt(hex.slice(3,5),16);
      const b = parseInt(hex.slice(5,7),16);

      document.getElementById("rgb").textContent = `rgb(${r}, ${g}, ${b})`;
      document.getElementById("css").textContent = `rgb(${r}, ${g}, ${b})`;

      const hsl = rgbToHsl(r,g,b);
      document.getElementById("hsl").textContent = `hsl(${hsl[0]}, ${hsl[1]}%, ${hsl[2]}%)`;

      const hsv = rgbToHsv(r,g,b);
      document.getElementById("hsv").textContent = `hsv(${hsv[0]}, ${hsv[1]}%, ${hsv[2]}%)`;

      const cmyk = rgbToCmyk(r,g,b);
      document.getElementById("cmyk").textContent = `cmyk(${cmyk[0]}%, ${cmyk[1]}%, ${cmyk[2]}%, ${cmyk[3]}%)`;

      document.getElementById("tailwind").textContent = getTailwindClass(hex);
    }

    colorPicker.addEventListener("input", (e) => updateColor(e.target.value));
    updateColor("#3b82f6");

    function copyColor() {
      const all = `HEX: ${document.getElementById("hex").textContent}
RGB: ${document.getElementById("rgb").textContent}
HSL: ${document.getElementById("hsl").textContent}
HSV: ${document.getElementById("hsv").textContent}
CMYK: ${document.getElementById("cmyk").textContent}
Tailwind: ${document.getElementById("tailwind").textContent}`;
      navigator.clipboard.writeText(all);
      alert("All color formats copied!");
    }

    function rgbToHsl(r,g,b) { r/=255; g/=255; b/=255; const max=Math.max(r,g,b), min=Math.min(r,g,b); let h,s,l=(max+min)/2; if(max===min){h=s=0;}else{const d=max-min;s=l>0.5?d/(2-max-min):d/(max+min);switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break}h/=6;} return [Math.round(h*360), Math.round(s*100), Math.round(l*100)]; }
    function rgbToHsv(r,g,b) { r/=255; g/=255; b/=255; const max=Math.max(r,g,b), min=Math.min(r,g,b); const v=max; const d=max-min; const s=max===0?0:d/max; let h=0; if(max!==min){switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break}h/=6;} return [Math.round(h*360), Math.round(s*100), Math.round(v*100)]; }
    function rgbToCmyk(r,g,b) { r/=255; g/=255; b/=255; const k = Math.min(1-r,1-g,1-b); const c = k===1?0:(1-r-k)/(1-k); const m = k===1?0:(1-g-k)/(1-k); const y = k===1?0:(1-b-k)/(1-k); return [Math.round(c*100), Math.round(m*100), Math.round(y*100), Math.round(k*100)]; }
    function getTailwindClass(hex) {
      const map = { "#ef4444": "red-500", "#f97316": "orange-500", "#f59e0b": "amber-500", "#eab308": "yellow-500", "#84cc16": "lime-500", "#22c55e": "green-500", "#10b981": "emerald-500", "#14b8a6": "teal-500", "#06b6d4": "cyan-500", "#0ea5e9": "sky-500", "#3b82f6": "blue-500", "#6366f1": "indigo-500", "#8b5cf6": "violet-500", "#a855f7": "purple-500", "#d946ef": "fuchsia-500", "#ec4899": "pink-500", "#f43f5e": "rose-500" };
      return map[hex.toLowerCase()] || "custom";
    }

    // XML Beautifier (Simple JS)
    function beautifyXml() {
      const input = document.getElementById("xmlBeautifyInput").value;
      if (!input.trim()) return alert("Please paste XML code");
      try {
        const xmlDoc = new DOMParser().parseFromString(input, "application/xml");
        const xslt = new DOMParser().parseFromString(
          `<?xml version="1.0"?>
          <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
            <xsl:strip-space elements="*"/>
            <xsl:template match="para[content-style][not(text())]">
              <xsl:value-of select="normalize-space(.)"/>
            </xsl:template>
            <xsl:template match="node()|@*">
              <xsl:copy><xsl:apply-templates select="node()|@*"/></xsl:copy>
            </xsl:template>
            <xsl:output indent="yes"/>
          </xsl:stylesheet>`, "application/xml");
        const processor = new XSLTProcessor();
        processor.importStylesheet(xslt);
        const result = processor.transformToDocument(xmlDoc);
        const beautified = new XMLSerializer().serializeToString(result);
        document.getElementById("xmlBeautifyOutput").value = beautified;
        document.getElementById("copyBeautifyBtn").classList.remove("hidden");
      } catch (e) {
        alert("Invalid XML: " + e.message);
      }
    }

    function copyBeautified() {
      navigator.clipboard.writeText(document.getElementById("xmlBeautifyOutput").value);
      alert("Beautified XML copied!");
    }

    // XML Minifier (Simple JS)
    function minifyXml() {
      const input = document.getElementById("xmlMinifyInput").value;
      if (!input.trim()) return alert("Please paste XML code");
      const minified = input.replace(/>\s+</g, "><").replace(/\s+</g, " ").replace(/^\s+|\s+$/g, "");
      document.getElementById("xmlMinifyOutput").value = minified;
      document.getElementById("copyMinifyBtn").classList.remove("hidden");
    }

    function copyMinified() {
      navigator.clipboard.writeText(document.getElementById("xmlMinifyOutput").value);
      alert("Minified XML copied!");
    }

    // XML Validator (Using DOMParser)
    function validateXml() {
      const input = document.getElementById("xmlValidateInput").value;
      if (!input.trim()) return alert("Please paste XML code");
      const output = document.getElementById("xmlValidateOutput");
      try {
        new DOMParser().parseFromString(input, "application/xml");
        output.innerHTML = '<p class="text-green-400">Valid XML!</p>';
      } catch (e) {
        output.innerHTML = '<p class="text-red-400">Invalid XML: ' + e.message + '</p>';
      }
    }
    // Custom SVG Generator (AI)
    async function generateCustomSvg() {
      const prompt = document.getElementById("svgPrompt").value;
      if (!prompt.trim()) return alert("Please describe the SVG");

      const response = await fetch(`https://generativelanguage.googleapis.com/v1/models/gemini-2.0-flash-exp:generateContent?key=${GEMINI_API_KEY}`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          contents: [{ role: "user", parts: [{ text: `Generate clean, optimized SVG code for: ${prompt}. Return only the <svg> code, no explanation.` }] }]
        })
      });

      const data = await response.json();
      const svgCode = data.candidates[0].content.parts[0].text.replace(/```svg|```/g, '').trim();
      
      document.getElementById("customSvgOutput").value = svgCode;
      document.getElementById("customSvgPreview").innerHTML = svgCode;
      document.getElementById("copyCustomSvgBtn").classList.remove("hidden");
    }

    function copyCustomSvg() {
      navigator.clipboard.writeText(document.getElementById("customSvgOutput").value);
      alert("Generated SVG copied!");
    }
  </script>
</body>
</html>